query getEntities {
  entities(keys: ["%"] first: 4096) {
    edges {
      node {
        keys
        components {
          ... on Color {
            __typename
            x
            y
            r
            g
            b
          }
          ... on Timestamp {
            x
            y
            created_at
            updated_at
            __typename
          }
          ... on Owner {
            x
            y
            address
            __typename
          }
          ... on Text {
            x
            y
            string
          }
          ... on PixelType {
            x
            y
            name
            __typename
          }
          ... on ColorCount {
            x
            y
            count
            __typename
          }
          ... on NeedsAttention {
            x
            y
            value
            __typename
          }
        }
      }
    }
  }
}

query all_filtered_entities($first: Int, $xMin: Int, $xMax: Int, $yMin: Int, $yMax: Int) {
  colorComponents(
    first: $first
    where: {xGTE: $xMin, xLTE: $xMax, yGTE: $yMin, yLTE: $yMax}
  ) {
    edges {
      node {
        x
        y
        r
        g
        b
        entity {
          id
        }
      }
    }
  }
  ownerComponents(
    first: $first
    where: {xGTE: $xMin, xLTE: $xMax, yGTE: $yMin, yLTE: $yMax}
  ) {
    edges {
      node {
        x
        y
        address
        entity {
          id
        }
      }
    }
  }
  pixeltypeComponents(
    first: $first
    where: {xGTE: $xMin, xLTE: $xMax, yGTE: $yMin, yLTE: $yMax}
  ) {
    edges {
      node {
        x
        y
        name
      }
    }
  }
}

query getNeedsAttention($first: Int, $address: String){
  ownerComponents(first: $first, where: { address: $address}) {
    edges {
      node {
        x
        y
        address
      }
    }
  }
  needsattentionComponents(first:$first, where: { value: 1}){
    edges{
      node{
        x
        y
        value
      }
    }
  }
}
